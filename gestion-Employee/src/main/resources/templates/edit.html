<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Modifier Employé</title>
    <link th:href="@{/styles/edit.css}" rel="stylesheet" />
</head>
<body>

<th:block th:insert="~{fragments/navbar :: navbar}"></th:block>

<h1>Modifier Employé</h1>

<form th:action="@{/employees/{id}/update(id=${employee.id})}" th:object="${employee}" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label for="name">Nom :</label>
        <input type="text" id="name" name="name" th:value="*{name}">
    </div>

    <div class="form-group">
        <label for="firstname">Prénom :</label>
        <input type="text" id="firstname" name="firstname" th:value="*{firstname}">
    </div>

    <div class="form-group">
        <label for="birthdate">Date de naissance :</label>
        <input type="date" id="birthdate" name="birthdate" th:value="*{birthdate}">
    </div>

    <div class="form-group">
        <label>Sexe :</label>
        <div class="radio-group">
            <input type="radio" id="male" name="sex" value="M" th:checked="${employee.sexe == 'H'}">
            <label for="male">Homme</label>

            <input type="radio" id="female" name="sex" value="F" th:checked="${employee.sexe == 'F'}">
            <label for="female">Femme</label>
        </div>
    </div>

    <div class="form-group">
        <label>Téléphone :</label>
        <div class="phone-input">
            <select id="phoneCountryCode">
                <option value="261">+261 (Madagascar)</option>
                <option value="33">+33 (France)</option>
                <option value="1">+1 (USA)</option>
                <option value="44">+44 (UK)</option>
                <!-- Ajoute d'autres options de codes pays ici -->
            </select>
            <input type="text" id="telephone" name="telephone" th:field="*{telephones}" placeholder="Numéro de téléphone (séparés par des virgules)">
        </div>
    </div>

    <div class="form-group">
        <label for="address">Adresse :</label>
        <input type="text" id="address" name="address" th:value="*{adresse}">
    </div>

    <div class="form-group">
        <label for="emailPerso">Email personnel :</label>
        <input type="email" id="emailPerso" name="emailPerso" th:value="*{emailPerso}">
    </div>

    <div class="form-group">
        <label for="emailPro">Email professionnel :</label>
        <input type="email" id="emailPro" name="emailPro" th:value="*{emailPro}">
    </div>

    <div class="form-group">
        <label for="cinNumero">CIN - Numéro :</label>
        <input type="text" id="cinNumero" name="cinNumero" th:value="*{cinNumero}">
    </div>

    <div class="form-group">
        <label for="cinDateDelivrance">CIN - Date de livraison :</label>
        <input type="date" id="cinDateDelivrance" name="cinDateDelivrance" th:value="*{cinDateDelivrance}">
    </div>

    <div class="form-group">
        <label for="cinLieuDelivrance">CIN - Lieu de délivrance :</label>
        <input type="text" id="cinLieuDelivrance" name="cinLieuDelivrance" th:value="*{cinLieuDelivrance}">
    </div>

    <div class="form-group">
        <label for="fonction">Fonction :</label>
        <input type="text" id="fonction" name="fonction" th:value="*{fonction}">
    </div>

    <div class="form-group">
        <label for="nombreEnfants">Nombre d'enfants à charge :</label>
        <input type="number" id="nombreEnfants" name="nombreEnfants" th:value="*{nombreEnfants}">
    </div>

    <div class="form-group">
        <label for="dateEmbauche">Date d'embauche :</label>
        <input type="date" id="dateEmbauche" name="dateEmbauche" th:value="*{dateEmbauche}">
    </div>

    <div class="form-group">
        <label for="dateDepart">Date de départ :</label>
        <input type="date" id="dateDepart" name="dateDepart" th:value="*{dateDepart}">
    </div>

    <div class="form-group">
        <label for="categorieSocioPro">Catégorie socio-professionnelle :</label>
        <select id="categorieSocioPro" name="categorieSocioPro" th:field="*{categorieSocioPro}">
            <option value="cadre" th:selected="${employee.categorieSocioPro == 'cadre'}">Cadre</option>
            <option value="employe" th:selected="${employee.categorieSocioPro == 'employe'}">Employé</option>
            <option value="ouvrier" th:selected="${employee.categorieSocioPro == 'ouvrier'}">Ouvrier</option>
        </select>
    </div>

    <div class="form-group">
        <label for="numeroCnaps">Numéro CNAPS :</label>
        <input type="text" id="numeroCnaps" name="numeroCnaps" th:value="*{numeroCnaps}">
    </div>

    <div class="form-group">
        <label for="salaire">Salaire brute :</label>
        <input type="text" id="salaire" name="salaire" th:value="*{salaireBrut}">
    </div>

    <!-- Champ de téléchargement de fichier -->
    <div class="form-group">
        <label for="image">Changer de photo :</label>
        <input type="file" id="image" name="image" accept="image/*" th:onchange="previewImage(event);">
    </div>

    <img id="previewImage" th:src="@{'data:image/png;base64,' + ${employee.photo}}" alt="Aperçu de l'image"/>

    <div class="form-group">
        <button type="submit">Modifier</button>
    </div>
</form>

<script type="text/javascript" th:src="@{/js/action.js}"></script>
<script type="text/javascript" th:src="@{/js/phone.js}"></script>

</body>
</html>
